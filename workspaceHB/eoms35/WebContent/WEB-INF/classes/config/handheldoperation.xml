<?xml version="1.0" encoding="GBK"?>
<boco>
	<!-- 掌上运维接口类型配置 -->
	<interfaceType>
		
		<dataService>dataService</dataService><!-- 工单数据服务接口 -->
		<dealSheet>dealSheet</dealSheet><!-- 工单处理完成提交请求接口 -->
		<acceptSheet>acceptSheet</acceptSheet><!-- 工单受理状态更新请求接口 -->
		<sheetList>sheetList</sheetList><!-- 工单列表查询接口 -->
		<rejectSheet>rejectSheet</rejectSheet><!-- 工单驳回接口 -->
		<historyList>historyList</historyList><!-- 工单流转环节服务接口 -->
		<csSheet>csSheet</csSheet><!-- 工单抄送接口 -->
		<inquirySheet>inquirySheet</inquirySheet><!-- 工单综合查询接口 -->
		<finishSheetList>finishSheetList</finishSheetList><!-- 已办工单列表查询接口 -->
		<transferSheet>transferSheet</transferSheet><!-- 工单指定接口 -->
		<readSheet>readSheet</readSheet><!-- 工单已阅接口 -->
<combineSheetsList>combineSheetsList</combineSheetsList>
	</interfaceType>
	<dataService>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue="" />
		<content columnName="title" interfaceEnName="Sheet_title" interfaceCnName="工单主题" defauleValue="" analysis="no"/>
		<content columnName="sendUserId" interfaceEnName="Operate_user" interfaceCnName="操作人姓名" defauleValue="" type="user"/>
		<content columnName="sendTime" interfaceEnName="Operate_time" interfaceCnName="发起时间" defauleValue="" />
		<content columnName="sendContact" interfaceEnName="Call_phone" interfaceCnName="联系电话" defauleValue="" />
		<content columnName="taskStatus" interfaceEnName="Sheet_status" interfaceCnName="工单状态" defauleValue="" />
		<content columnName="mainAlarmNum" interfaceEnName="alarm _id" interfaceCnName="网管告警流水号" defauleValue="" />
		<content columnName="sheetCompleteLimit" interfaceEnName="DEAL_TIME" interfaceCnName="工单处理时限" defauleValue="" />
		<content columnName="mainCompleteLimitT1" interfaceEnName="T1_DEALTIME_LMT" interfaceCnName="T1阶段处理时限" defauleValue="" />
		<content columnName="mainCompleteLimitT2" interfaceEnName="T2_DEALTIME_LMT" interfaceCnName="T2阶段处理时限" defauleValue="" />
		<content columnName="mainCompleteLimitT3" interfaceEnName="T3_DEALTIME_LMT" interfaceCnName="T3阶段处理时限" defauleValue="" />
		
		<content columnName="mainFaultGenerantTime" interfaceEnName="FAULT_HAPPENTIME" interfaceCnName="故障发生时间" defauleValue="" />
		<content columnName="toDeptId" interfaceEnName="CITY_ID" interfaceCnName="故障地市" defauleValue="" />
		
		<content columnName="mainNetName" interfaceEnName="Ne_name" interfaceCnName="网元名称" defauleValue="" />
		<content columnName="title" interfaceEnName="Alarm_title" interfaceCnName="告警标题" defauleValue="" analysis="no"/>
		<content columnName="mainEquipmentFactory" interfaceEnName="VENDOR_ID" interfaceCnName="设备厂商" defauleValue="" type="dict"/>
		<content columnName="mainEquipmentModel" interfaceEnName="OBJECT_CLASS" interfaceCnName="设备类型" defauleValue="" /><!-- 故障设备型号 -->
		<content columnName="mainAlarmDesc" interfaceEnName="ALARM_TEXT" interfaceCnName="告警正文" defauleValue="" analysis="no"/>
		
		<content columnName="mainAlarmId" interfaceEnName="Alarm_id" interfaceCnName="告警ID" defauleValue="" />
		<content columnName="mainNetSortOne" interfaceEnName="NetSort_one" interfaceCnName="网络一级分类" defauleValue="" />
		<content columnName="mainNetSortTwo" interfaceEnName="NetSort_two" interfaceCnName="网络二级分类" defauleValue="" />
		<content columnName="mainNetSortThree" interfaceEnName="NetSort_three" interfaceCnName="网络三级分类" defauleValue="" />
		<content columnName="mainFaultResponseLevel" interfaceEnName="Sheet_level" interfaceCnName="工单级别" defauleValue="" />
		<content columnName="mainAlarmSolveDate" interfaceEnName="alarmsolve_date" interfaceCnName="故障消除时间" defauleValue="" />
		<content columnName="mainCheckTime" interfaceEnName="check_time" interfaceCnName="告警核实时间" defauleValue="" />
		<content columnName="linkFaultFirstDealDesc" interfaceEnName="PreDealInfo" interfaceCnName="故障初步处理情况" defauleValue="" />
		<content columnName="packinfo" interfaceEnName="pack_info" interfaceCnName="追涡畔" defauleValue="" />

	    <content columnName="linkFaultReasonSort" interfaceEnName="faultReason_one" interfaceCnName="归因一级" defauleValue="" type="dict"/>
		<content columnName="linkfaultreasonsubsection" interfaceEnName="faultReason_two" interfaceCnName="归因二级" defauleValue="" type="dict"/>
		<content columnName="linkfaultreasonsubsectiontwo" interfaceEnName="faultReason_three" interfaceCnName="归因三级" defauleValue="" type="dict" />
		<content columnName="faultdealdesc" interfaceEnName="faultReason" interfaceCnName="故障原因" defauleValue="" />
		<content columnName="linkDealStep" interfaceEnName="dealWay" interfaceCnName="处理措施"  defauleValue=""/>
		<content columnName="faultdealtime" interfaceEnName="dealWay_time" interfaceCnName="采取措施时间" defauleValue="" />
	    <content columnName="mainPretResult" interfaceEnName="mainpretresult" interfaceCnName="工单预处理" defauleValue="" />

		
		<content columnName="mainT2RejectionNum" interfaceEnName="T2_RejectionNum" interfaceCnName="T2驳回T1次数" defauleValue="" />
		
		</dataService>
	
	<acceptSheet>
		<content columnName="sheetId"  interfaceName="Sheet_id"  defauleValue=""/><!-- 工单编号 -->
		<content columnName=""  interfaceName="Sheet_status"  defauleValue=""/><!-- 工单状态 -->
		<content columnName=""  interfaceName="Operate_userid"  defauleValue=""/><!-- 处理人账号-->
		<content columnName="operateTime"  interfaceName="Accept_time"  defauleValue=""/><!-- 故障受理时间 -->
		<content columnName="beanId"  interfaceName=""  defauleValue="iCommonFaultMainManager"/>
		<content columnName="mainClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultMain" />
		<content columnName="linkClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultLink" />
		<content columnName="activeTemplateId" interfaceName="" defauleValue="SecondExcuteHumTask" />
		<content columnName="operateType" interfaceName="" defauleValue="61" />
		<content columnName="linkIfMobile" interfaceName="" defauleValue="mobileAccept" />
		<content columnName="completeFlag" interfaceName="Complete_flag" defauleValue="0" />		<!-- 超时标记-->	
	</acceptSheet>
	
	<dealSheet>
		<content columnName="sheetId"  interfaceName="Sheet_id"  defauleValue=""/><!-- 工单编号 -->
		<content columnName=""  interfaceName="Operate_userid"  defauleValue=""/><!--处理人账号  -->
		<content columnName="operateTime"  interfaceName="Operate_time"  defauleValue=""/><!--处理完成时间  -->
		<content columnName=""  interfaceName="Sheet_status"  defauleValue=""/><!--工单状态  -->
		<content columnName="linkFaultReasonSort" interfaceName="Fault_reason1" defauleValue="" /><!--归因一级 -->
		<content columnName="linkFaultReasonSubsection" interfaceName="Fault_reason2" defauleValue="" /><!--归因二级 -->
		<content columnName="linkFaultReasonSubsectionTwo" interfaceName="Fault_reason3" defauleValue="" /><!--归因三级  -->	
		<content columnName="faultdealdesc" interfaceName="Fault_text" defauleValue="" /><!-- 故障原因 -->
		<content columnName="linkDealStep" interfaceName="Operate_text" defauleValue="" /><!--处理措施 -->
		<content columnName="status"  interfaceName=""  defauleValue="0"/>
		<content columnName="beanId"  interfaceName=""  defauleValue="iCommonFaultMainManager"/>
		<content columnName="mainClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultMain" />
		<content columnName="linkClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultLink" />
		<content columnName="phaseId" interfaceName="" defauleValue="HoldTask" />
		<content columnName="operateType" interfaceName="" defauleValue="46" />
		<content columnName="linkIfMobile" interfaceName="" defauleValue="mobileDeal" />
		<content columnName="linkFaultDealResult" interfaceName="" defauleValue="101030601" />
		<content columnName="linkIfGreatFault" interfaceName="" defauleValue="1030102" />
		<content columnName="linkIfExcuteNetChange" interfaceName="" defauleValue="1030102" />
		<content columnName="linkIfFinallySolveProject" interfaceName="" defauleValue="1030101" />
		<content columnName="linkIfAddCaseDataBase" interfaceName="" defauleValue="1030102" />
    <content columnName="linkUntreadIdea" interfaceName="Vendor_name" defauleValue="" />
		<content columnName="faultclassification" interfaceName="Fault_classification" defauleValue="" /><!-- 故障分类 -->
		<content columnName="linkbackcase" interfaceName="Fault_backcase" defauleValue="" />		<!-- 故障归因-->
		<content columnName="completeFlag" interfaceName="Complete_flag" defauleValue="0" />		<!-- 超时标记-->
	  <content columnName="faultdealtime" interfaceName="Faultdeal_time" defauleValue="" /><!-- 采取措施时间 -->
		<content columnName="faulttreatment" interfaceName="Fault_treatment" defauleValue="" /><!--故障处理人 -->
		<content columnName="linkdealdesc" interfaceName="Linkdeal_desc" defauleValue="" /><!--故障措施 -->
<content columnName="linkFaultAvoidTime" interfaceName="Clear_time" defauleValue="" /><!--故障消除时间 -->

	</dealSheet>
		<content columnName=""  interfaceName="User_id"  defauleValue=""/><!--当前待办人  -->
		<content columnName=""  interfaceName="Sheet_status"  defauleValue=""/><!--工单状态  -->
		<content columnName=""  interfaceName="NETWORK_SORT"  defauleValue=""/><!--网络类型  -->
		<content columnName=""  interfaceName="Start_records"  defauleValue=""/><!--开始记录数  -->
		<content columnName=""  interfaceName="End_records"  defauleValue=""/><!--结束记录数  -->
	<sheetList>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue="" />
		<content columnName="title" interfaceEnName="Sheet_title" interfaceCnName="工单标题" defauleValue="" />
		<content columnName="mainCompleteLimitT2" interfaceEnName="Deal_time" interfaceCnName="工单处理时限" defauleValue="" />
		<content columnName="taskstatus" interfaceEnName="Sheet_status" interfaceCnName="工单状态" defauleValue="" />
		<content columnName="taskname" interfaceEnName="Operate_task" interfaceCnName="工单处理环节" defauleValue="" />
		<content columnName="mainnetsortone" interfaceEnName="NetSort_one" interfaceCnName="网络一级分类" defauleValue="" />
		<content columnName="mainfaultresponselevel" interfaceEnName="Fault_ResponseLevel" interfaceCnName="工单级别" defauleValue="" />
		<content columnName="sheet_totals" interfaceEnName="Sheet_totals" interfaceCnName="总条数" defauleValue="" />
	</sheetList>
	<rejectSheet>
		<content columnName="sheetId"  interfaceName="Sheet_id"  defauleValue=""/><!-- 工单编号 -->
		<content columnName=""  interfaceName="Operate_userid"  defauleValue=""/><!--处理人账号  -->
		<content columnName="operateTime"  interfaceName="Reject_time"  defauleValue=""/><!--驳回时间  -->
		<content columnName=""  interfaceName="Operate_task"  defauleValue=""/><!--操作类型  -->
		<content columnName="remark"  interfaceName="Reject_desc"  defauleValue=""/><!--驳回原因  -->
		<content columnName="linkCiytSubrole"  interfaceName="Reject_to_roleid"  defauleValue=""/><!-- 驳回至T2班组ID -->
		
		<content columnName="linkSendRes"  interfaceName="Turn_send_reason"  defauleValue=""/><!-- 转派理由 -->
		<content columnName="linkSendOtherName"  interfaceName="Turn_send_name"  defauleValue=""/><!-- 驳回至T2班组ID -->
		<content columnName="linkSendOtherTel"  interfaceName="Turn_send_ phone"  defauleValue=""/><!-- 驳回至T2班组ID -->
		<content columnName="mainIsOther"  interfaceName="Turn_send_flag"  defauleValue=""/><!-- 转派标识 1表示跨班组 -->
		
		<content columnName="beanId"  interfaceName=""  defauleValue="iCommonFaultMainManager"/>
		<content columnName="mainClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultMain" />
		<content columnName="linkIfMobile" interfaceName="" defauleValue="mobileReject" />
		<content columnName="linkClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultLink" />
	</rejectSheet>
	<historyList>
		<content columnName="operateuserid" interfaceEnName="Operate_id" interfaceCnName="处理人姓名" defauleValue="" type="user"/>
		<content columnName="operatercontact" interfaceEnName="User_phone" interfaceCnName="联系电话" defauleValue="" />
		<content columnName="operateTime" interfaceEnName="Appect_time" interfaceCnName="受理时间" defauleValue=""/>
		<content columnName="operateTime" interfaceEnName="Replay_time" interfaceCnName="回复时间" defauleValue=""/>
		<content columnName="activetemplateid" interfaceEnName="Task_name" interfaceCnName="环节名" defauleValue=""/>
		<content columnName="activetemplateid" interfaceEnName="Task_desc" interfaceCnName="环节描述" defauleValue="" dictPath="dict-sheet-commonfault.xml"/>
		<content columnName="limitFlag" interfaceEnName="Limit_flag" interfaceCnName="处理超时标识" defauleValue=""/>
		<content columnName="operatetype" interfaceEnName="Operate_result" interfaceCnName="故障处理结果" defauleValue="" dictPath="dict-sheet-commonfault.xml"/>
		<content columnName="remark" interfaceEnName="Operation_description" interfaceCnName="操作描述" defauleValue="" />
		<content columnName="linkFaultFirstDealDesc" interfaceEnName="Operate_dispose" interfaceCnName="故障初步处理情况" defauleValue=""/>
	</historyList>
	<csSheet>
		<content columnName="sheetId"  interfaceName="Sheet_id"  defauleValue=""/><!-- 工单编号 -->
		<content columnName="operateuserid" interfaceName="Operate_userid"  defauleValue="" type="user"/><!--处理人账号  -->
		<content columnName="operateTime"  interfaceName="Operate_time"  defauleValue=""/><!--抄送时间  -->
		<content columnName=""  interfaceName="Operate_task"  defauleValue=""/><!--操作类型  -->
		<content columnName=""  interfaceName="Role_id"  defauleValue=""/><!--抄送班组  -->
	</csSheet>
	<inquirySheet>
		<content columnName="sheet_totals" interfaceEnName="Sheet_totals" interfaceCnName="总条数" defauleValue=""/>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue=""/>
		<content columnName="title" interfaceEnName="Sheet_title" interfaceCnName="工单标题" defauleValue=""/>
		<content columnName="Sheetcompletelimit" interfaceEnName="Deal_time" interfaceCnName="工单处理时限" defauleValue=""/>
	</inquirySheet>
	<finishSheetList>
		<content columnName="sheet_totals" interfaceEnName="Sheet_totals" interfaceCnName="总条数" defauleValue=""/>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue=""/>
		<content columnName="title" interfaceEnName="Sheet_title" interfaceCnName="工单标题" defauleValue=""/>
		<content columnName="sheetCompleteLimit" interfaceEnName="Deal_time" interfaceCnName="工单处理时限" defauleValue=""/>
		<content columnName="status" interfaceEnName="Sheet_status" interfaceCnName="工单状态" defauleValue=""/>
		<content columnName="taskdisplayname" interfaceEnName="Operate_task" interfaceCnName="工单处理环节" defauleValue=""/>
		<content columnName="mainNetSortOne" interfaceEnName="Netsort_one" interfaceCnName="网络一级分类" defauleValue=""/>
		<content columnName="mainFaultResponseLevel" interfaceEnName="Fault_ResponseLevel" interfaceCnName="工单级别" defauleValue=""/>			
	</finishSheetList>
	<transferSheet>
		<content columnName="sheetId"  interfaceName="Sheet_id"  defauleValue=""/><!-- 工单编号 -->
		<content columnName=""  interfaceName="Operate_userid"  defauleValue=""/><!--处理人账号  -->
		<content columnName="operateTime"  interfaceName="Operate_time"  defauleValue=""/><!--处理完成时间  -->
		<content columnName=""  interfaceName="Operate_task"  defauleValue=""/><!--操作类型  -->
		<content columnName="" interfaceName="Role_id" defauleValue="" /><!--所在班组  -->
		<content columnName="" interfaceName="Assign_userid" defauleValue="" /><!--指定账号-->
		<content columnName="beanId"  interfaceName=""  defauleValue="iCommonFaultMainManager"/>
		<content columnName="mainClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultMain" />
		<content columnName="linkClassName" interfaceName="" defauleValue="com.boco.eoms.sheet.commonfault.model.CommonFaultLink" />
		<content columnName="activeTemplateId" interfaceName="" defauleValue="SecondExcuteHumTask" />
		<content columnName="operateType" interfaceName="" defauleValue="61" />
	</transferSheet> 
	<readSheet>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue=""/>
		<content columnName="" interfaceEnName="Operate_task" interfaceCnName="操作类型" defauleValue=""/>
		<content columnName="operateuserid" interfaceEnName="Operate_id" interfaceCnName="处理人账号" defauleValue=""/>
		<content columnName="operateTime" interfaceEnName="Operate_time" interfaceCnName="阅读时间" defauleValue=""/>
		<content columnName="linkIfMobile" interfaceName="" defauleValue="mobileDeal" />
	</readSheet>
<combineSheetsList>
		<content columnName="sheet_totals" interfaceEnName="Sheet_totals" interfaceCnName="总条数" defauleValue=""/>
		<content columnName="sheetId" interfaceEnName="Sheet_id" interfaceCnName="工单编号" defauleValue=""/>
		<content columnName="title" interfaceEnName="Sheet_title" interfaceCnName="工单标题" defauleValue=""/>
		<content columnName="sheetCompleteLimit" interfaceEnName="Deal_time" interfaceCnName="工单处理时限" defauleValue=""/>
		<content columnName="mainFaultResponseLevel" interfaceEnName="level" interfaceCnName="等级" defauleValue=""/>

	</combineSheetsList>
	<sql>
		<undoListSql>
			select task.sheetid,task.title,main.maincompletelimitt2,
			case taskstatus when '2' then '未接单' when '8' then  '已接单未处理' end as taskstatus,
  			case taskname when 'cc' then '抄送' when 'SecondExcuteHumTask' then 'T2处理' else '其他' end as taskname,
   			main.mainnetsortone,main.mainfaultresponselevel 
			from commonfault_task task,commonfault_main main 
			where main.sendTime>sysdate-30 and main.id = task.sheetkey and task.taskDisplayName&lt;&gt;'草稿' and task.taskDisplayName&lt;&gt;'抄送' and main.deleted&lt;&gt;'1' and main.status=0 AND main.mainifcombine IS NULL and (main.mainTownerFlag&lt;&gt;'1' or main.mainTownerFlag is null) and (main.netOptimization='3' or main.netOptimization is null )
			and exists(select 1 from ( select t3.id from commonfault_task t3,commonfault_main m2 where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and t3.taskowner = '@userId@' 
			union all select t3.id from commonfault_task t3,commonfault_main m2 where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and t3.taskowner = '@deptId@' 
			union all select t3.id from commonfault_task t3,commonfault_main m2,taw_system_userrefrole r where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and r.subRoleid = t3.taskowner and r.userid='@userId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1 where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and m1.status = 0 and m1.deleted &lt;&gt; '1' and t1.taskowner='@userId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1 where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and m1.status = 0 and m1.deleted &lt;&gt; '1' and t1.taskowner='@deptId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1, taw_system_userrefrole r where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and t1.taskowner=r.subRoleid and m1.status = 0 and m1.deleted &lt;&gt; '1' and r.userid = '@userId@')t where t.id = task.id) 
			order by main.maincompletelimitt2 
		</undoListSql>
		<ccundoListSql>
			select task.sheetid,task.title,task.completetimelimit,
			case taskstatus when '2' then '未接单' when '8' then  '已接单未处理' end as taskstatus,
  			case taskname when 'cc' then '抄送' when 'SecondExcuteHumTask' then 'T2处理' else '其他' end as taskname,
   			main.mainnetsortone,main.mainfaultresponselevel 
			from commonfault_task task,commonfault_main main 
			where main.id = task.sheetkey and task.taskDisplayName&lt;&gt;'草稿' and main.deleted&lt;&gt;'1' and main.status=0 and task.taskname='cc' 
			and task.id in ( select t3.id from commonfault_task t3,commonfault_main m2 where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and t3.taskowner = '@userId@' 
			union all select t3.id from commonfault_task t3,commonfault_main m2 where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and t3.taskowner = '@deptId@' 
			union all select t3.id from commonfault_task t3,commonfault_main m2,taw_system_userrefrole r where taskstatus in ('2','8') and ifwaitforsubtask = 'false' and t3.sheetkey = m2.id and m2.status=0 and m2.deleted &lt;&gt;'1' and r.subRoleid = t3.taskowner and r.userid='@userId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1 where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and m1.status = 0 and m1.deleted &lt;&gt; '1' and t1.taskowner='@userId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1 where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and m1.status = 0 and m1.deleted &lt;&gt; '1' and t1.taskowner='@deptId@' 
			union all select t1.id from commonfault_task t1, commonfault_task t2, commonfault_main m1, taw_system_userrefrole r where t1.ifwaitforsubtask = 'true' and t1.taskstatus in ('2', '8') and t1.id = t2.parenttaskid and t2.taskstatus = 5 and t2.subtaskdealfalg is null and t1.sheetkey = m1.id and t1.taskowner=r.subRoleid and m1.status = 0 and m1.deleted &lt;&gt; '1' and r.userid = '@userId@') 
			order by main.maincompletelimitt2 
		</ccundoListSql>

		<historySql>
			select operateuserid,operatercontact,accepttime,operatetime,activetemplateid,operatetype,remark,linkFaultFirstDealDesc,
			case when (case when operatetype=61 then acceptflag else completeflag end)=2 then 'Y' else 'N' end as limitFlag
 			from  commonfault_link    where mainid='@mainid@'
                        order by operatetime
		</historySql>
		<!-- 工单综合查询接口sql -->
		<!-- 工单状态为-1 全部-->
		<inquirySheetSql-1>
			 select distinct commonFaultMain.* 
  			 from CommonFault_Main  commonFaultMain,
       		      CommonFault_Link  commonFaultLink
			 where commonFaultMain.id = commonFaultLink.mainId
			   and commonFaultMain.templateFlag &lt;&gt; 1
			   and commonFaultLink.templateFlag &lt;&gt; 1
			   and commonFaultMain.deleted = '0'
			   and commonFaultLink.operatetype in (select '4' from dual union all select '61' from dual union all select '46' from dual union all select '5' from dual union all select '-10' from dual union all select '9' from dual)
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql-1>
		<!-- 工单状态为1 草稿-->
		<inquirySheetSql1>
		 	select distinct commonFaultMain.* 
  			from CommonFault_Main  commonFaultMain,
       			 CommonFault_Task  commonFaultTask,
       		      CommonFault_Link  commonFaultLink
 			where commonFaultMain.id = commonFaultTask.sheetKey
 			   and commonFaultMain.id = commonFaultLink.mainId
  			   and commonFaultMain.templateFlag &lt;&gt; 1
   			   and commonFaultMain.deleted &lt;&gt; '1'
  			   and commonFaultTask.taskName = 'DraftHumTask'
  			   and commonFaultMain.status = '0'
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql1>
		<!-- 工单状态为7 运行中-->
		<inquirySheetSql7>
		 	select distinct commonFaultMain.* 
  			from CommonFault_Main  commonFaultMain,
       		      CommonFault_Link  commonFaultLink
 			where commonFaultMain.id = commonFaultLink.mainId
 			   and commonFaultMain.templateFlag &lt;&gt; 1
   			   and commonFaultMain.deleted = '0'
  			   and commonFaultMain.status = '0'
  			   and commonFaultLink.operatetype in (select '4' from dual union all select '61' from dual union all select '46' from dual union all select '5' from dual union all select '-10' from dual union all select '9' from dual)
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql7>
		<!-- 工单状态为4 处理完成-->
		<inquirySheetSql4>
		 	select distinct commonFaultMain.* 
  			from CommonFault_Task  commonFaultTask,CommonFault_Main  commonFaultMain,
       		      CommonFault_Link  commonFaultLink
 			where commonFaultMain.id = commonFaultTask.sheetKey
 			   and commonFaultMain.id = commonFaultLink.mainId
 			   and commonFaultTask.ifWaitForSubTask = 'true'
    		   and (commonFaultTask.taskStatus = '5' or
       			  commonFaultTask.taskStatus &lt;&gt; '5' and
       			  commonFaultTask.ifWaitForSubTask = 'true' and
       			  (commonFaultTask.id not in
       			  (select commonfaul3_.parentTaskId
                   from commonfault_task commonfaul3_
                   where commonfaul3_.subTaskFlag = 'true'
                     and (commonfaul3_.subTaskDealFalg = 'false' or
                         commonfaul3_.subTaskDealFalg is null)
                     and commonfaul3_.taskStatus = '5')))
    		   and commonFaultMain.deleted = '0'
  			   and commonFaultMain.status = '0'
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql4>
		<!-- 工单状态为5 已归档-->
		<inquirySheetSql5>
		 	select distinct commonFaultMain.* 
  			from CommonFault_Main  commonFaultMain,
       		     CommonFault_Link  commonFaultLink
 			where commonFaultMain.templateFlag &lt;&gt; 1
 			   and commonFaultMain.id = commonFaultLink.mainId
   			   and commonFaultMain.deleted = '0'
  			   and commonFaultMain.status = '1'
  			   and commonFaultLink.operatetype in (select '4' from dual union all select '61' from dual union all select '46' from dual union all select '5' from dual union all select '-10' from dual union all select '9' from dual)
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql5>
		<!-- 工单状态为6 作废-->
		<inquirySheetSql6>
		 	select distinct commonFaultMain.* 
  			from CommonFault_Main  commonFaultMain,
       		     CommonFault_Link  commonFaultLink
 			where commonFaultMain.templateFlag &lt;&gt; 1
 			   and commonFaultMain.id = commonFaultLink.mainId
   			   and commonFaultMain.deleted &lt;&gt; '1'
  			   and commonFaultMain.status = '-12'
			   @timeStart@ 
			   @timeEnd@
			   @mainnetsortone@
			   @mainfaultresponselevel@
			   @operateRoleId@
			   @operateUserId@
			   @formNo@
			   @formTitle@
			 order by commonFaultMain.sendTime desc
		</inquirySheetSql6>
		<!--已办工单列表查询接口sql-->
		<finishSheetList>	
							select a.Sheetid,a.Title,a.Sheetcompletelimit,a.Status,
       			task.Taskdisplayname,a.mainnetsortone,a.mainfaultresponselevel
			from commonfault_main a,commonfault_task task
			where task.sheetKey = a.id
			  and a.deleted &lt;&gt; '1'
  			  and task.taskOwner = '@User_id@'
  			  and (task.taskStatus = '5' or
               task.taskStatus &lt;&gt; '5' and
               task.ifWaitForSubTask = 'true' and
               (task.id not in
               (select commonfaul3_.parentTaskId
                    from commonfault_task commonfaul3_
                   where commonfaul3_.subTaskFlag = 'true'
                     and (commonfaul3_.subTaskDealFalg = 'false' or
                         commonfaul3_.subTaskDealFalg is null)
                     and commonfaul3_.taskStatus = '5')))
  			  @Start_time@
  			  @End_time@
			order by task.createTime
			
</finishSheetList>

<finishList>

select link.linkFaultReasonSort,
       link.linkfaultreasonsubsection ,
       link.linkfaultreasonsubsectiontwo ,
       link.faultdealdesc,
       link.faultdealtime,
       link.linkDealStep
  from commonfault_link link,commonfault_main main
 where main.sheetId =  '@id@'
 and link.operatetype = '46'
and main.id=link.mainid
order by link.operatetime desc

</finishList>

	</sql>
</boco>