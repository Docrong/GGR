<?xml version="1.0" encoding="UTF-8"?>
<!--所有标签名称都为固定值,不能修改,否则无法解析. -->
<KpiConfig>
	<title>kpi统计</title>
	<est-module-id></est-module-id>

	<!-- 第一层统计 -->
  <kpi-define><!-- 可重复 -->
		<name>first</name>
		<kpi-caption></kpi-caption>
     <condition-param page-name="beginTime"/>
		 <condition-param page-name="endTime"/>
     <summary-define>
			<id>s1</id>
			<sequence></sequence>
			<column>'a'</column>
			<id2name-service></id2name-service>
			</summary-define>
		  <auto-append-groupby>fasle</auto-append-groupby>

		<stat-detail-vo>com.boco.eoms.commons.statistic.flowcontrol.vo.FlowcontrolDetailVO</stat-detail-vo><!--显示DetailVO-->

		<query-define><!-- 可重复 -->
			<name>query1</name>
		<!-- sql片段,用于jdbc统计(分子) -->
      <from>v_flowcontrol est</from><!-- 不可为空 -->
		  <where>
		     est.sendtime&gt;=add_months(sysdate,-10)
		  </where><!-- 可为空 -->
      <field-define><!-- 可重复 -->
				<id>f1</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when est.taskstatus='2' then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='2'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
       <field-define><!-- 可重复 -->
				<id>f2</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when est.taskstatus='8' then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='8'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f3</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when est.taskname='HoldHumTask' then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskname='HoldHumTask'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f4</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when (cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and 
				(cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f5</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when (cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and 
				(cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f6</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when  est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30 then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and 
				est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f7</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>nvl(sum(case when sysdate&gt;est.completetimelimit then 1 else 0 end),0)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and sysdate&gt;est.completetimelimit
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		</query-define>
		
	</kpi-define>	




 <!-- 第二层工单 -->
  <kpi-define><!-- 可重复 -->
		<name>second_sheet</name>
		<kpi-caption></kpi-caption>
    
   <condition-param page-name="beginTime"/>
		<condition-param page-name="endTime"/>
     <summary-define>
			<id>s1</id>
			<sequence></sequence>
			<column>est.sheettype</column>
			<id2name-service>statDictId2name_v35</id2name-service>
		</summary-define>
		 
    <stat-detail-vo>com.boco.eoms.commons.statistic.flowcontrol.vo.FlowcontrolDetailVO</stat-detail-vo><!--显示DetailVO-->

	<query-define><!-- 可重复 -->
			<name>query1</name>
		<!-- sql片段,用于jdbc统计(分子) -->
      <from>v_flowcontrol est</from><!-- 不可为空 -->
		  <where>
		     est.sendtime&gt;=add_months(sysdate,-10)
		  </where><!-- 可为空 -->
      <field-define><!-- 可重复 -->
				<id>f1</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='2' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='2' and est.sheettype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
       <field-define><!-- 可重复 -->
				<id>f2</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='8' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='8' and est.sheettype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f3</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskname='HoldHumTask' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskname='HoldHumTask' and est.sheettype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f4</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and  
				(cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f5</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and 
				(cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f6</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when  est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and 
				est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f7</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when sysdate&gt;est.completetimelimit then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and sysdate&gt;est.completetimelimit and est.sheettype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		</query-define>
		
	</kpi-define>	

<!-- 第三层工单 -->
 <kpi-define><!-- 可重复 -->
		<name>third_sheet</name>
		<kpi-caption></kpi-caption>
    
    <condition-param page-name="beginTime"/>
		<condition-param page-name="endTime"/>
		<condition-param  page-name="dydept"/>
    
     <summary-define>
			<id>s1</id>
			<sequence></sequence>
			<column>est.sheettype</column>
			<id2name-service>statDictId2name_v35</id2name-service>
		</summary-define>
		 
    <stat-detail-vo>com.boco.eoms.commons.statistic.flowcontrol.vo.FlowcontrolDetailVO</stat-detail-vo><!--显示DetailVO-->

	<query-define><!-- 可重复 -->
			<name>query1</name>
		<!-- sql片段,用于jdbc统计(分子) -->
      <from>v_flowcontrol est</from><!-- 不可为空 -->
		  <where>
		     est.sendtime&gt;=add_months(sysdate,-10) and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
		  </where><!-- 可为空 -->
      <field-define><!-- 可重复 -->
				<id>f1</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='2' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='2' and est.sheettype='@s1@'
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
       <field-define><!-- 可重复 -->
				<id>f2</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='8' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='8' and est.sheettype='@s1@'
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f3</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskname='HoldHumTask' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.taskname='HoldHumTask' and est.sheettype='@s1@'
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f4</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and  
				(cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f5</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and 
				(cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f6</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when  est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and 
				est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f7</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when sysdate&gt;est.completetimelimit then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where  est.sendtime&gt;=add_months(sysdate,-10) and est.sheettype='@s1@' and sysdate&gt;est.completetimelimit 
				and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		</query-define>
		
	</kpi-define>	

	<!-- 第二层部门 -->
	<kpi-define><!-- 可重复 -->
		<name>second_dept</name>
		<kpi-caption></kpi-caption>
    <condition-param page-name="beginTime"/>
		<condition-param page-name="endTime"/>
		
	  <summary-define>
			<id>s1</id>
			<sequence></sequence>
			<column>city.depttype</column>
		  <id2name-service>statBaseDeptId2name_v35</id2name-service>
		</summary-define>
		
		
    <stat-detail-vo>com.boco.eoms.commons.statistic.flowcontrol.vo.FlowcontrolDetailVO</stat-detail-vo><!--显示DetailVO-->
        
		<query-define><!-- 可重复 -->
			<name>query1</name>
		<!-- sql片段,用于jdbc统计(分子) -->
      <from>v_flowcontrol est,est_dept_city city</from><!-- 不可为空 -->
		  <where>
		    est.operatedeptid=city.deptid  and  est.sendtime&gt;=add_months(sysdate,-10)
		  </where><!-- 可为空 -->
      <field-define><!-- 可重复 -->
				<id>f1</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='2' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid  
				and est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='2' and city.depttype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
       <field-define><!-- 可重复 -->
				<id>f2</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='8' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid   
				and est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='8' and city.depttype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f3</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskname='HoldHumTask' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid  
				and est.sendtime&gt;=add_months(sysdate,-10) and est.taskname='HoldHumTask' and city.depttype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f4</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid   
				and est.sendtime&gt;=add_months(sysdate,-10) and city.depttype='@s1@'  and 
				(cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f5</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid  
				and est.sendtime&gt;=add_months(sysdate,-10) and city.depttype='@s1@' and 
				(cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f6</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when  est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid  
				and est.sendtime&gt;=add_months(sysdate,-10) and city.depttype='@s1@' and 
				est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f7</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when sysdate&gt;est.completetimelimit then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est,est_dept_city city where est.operatedeptid=city.deptid  
				and est.sendtime&gt;=add_months(sysdate,-10) and sysdate&gt;est.completetimelimit and city.depttype='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		</query-define>
	</kpi-define>
	
	
  <!-- 第三层部门 -->
	<kpi-define><!-- 可重复 -->
		<name>third_dept</name>
		<kpi-caption></kpi-caption>
    <condition-param page-name="beginTime"/>
		<condition-param page-name="endTime"/>
		
		<condition-param  page-name="dydept"/>
		
	  <summary-define>
			<id>s1</id>
			<sequence></sequence>
			<column>est.operatedeptid</column>
		  <id2name-service>statBaseDeptId2name_v35</id2name-service>
		</summary-define>
		
		
		
    <stat-detail-vo>com.boco.eoms.commons.statistic.flowcontrol.vo.FlowcontrolDetailVO</stat-detail-vo><!--显示DetailVO-->
        
		<query-define><!-- 可重复 -->
			<name>query1</name>
		<!-- sql片段,用于jdbc统计(分子) -->
      <from>v_flowcontrol est</from><!-- 不可为空 -->
		  <where>
		    est.sendtime&gt;=add_months(sysdate,-10)
		    and est.operatedeptid in (select deptid from taw_system_dept start with deptid='@dydept@' connect by prior deptid=parentdeptid)
		  </where><!-- 可为空 -->
      <field-define><!-- 可重复 -->
				<id>f1</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='2' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='2'  and est.operatedeptid='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
       <field-define><!-- 可重复 -->
				<id>f2</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskstatus='8' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.taskstatus='8' and est.operatedeptid='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f3</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when est.taskname='HoldHumTask' then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.taskname='HoldHumTask' and est.operatedeptid='@s1@'
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f4</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.operatedeptid='@s1@' and 
				(cast(est.completetimelimit as date)-sysdate)*24&gt;=1 and (cast(est.completetimelimit as date)-sysdate)*24&lt;=2 
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f5</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when (cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.operatedeptid='@s1@' and  
				(cast(est.completetimelimit as date)-sysdate)*1440&gt;=30 and (cast(est.completetimelimit as date)-sysdate)*24&lt;1 
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f6</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when  est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30 then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
			  from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and est.operatedeptid='@s1@' and 
				est.completetimelimit&gt;=sysdate and (cast(est.completetimelimit as date)-sysdate)*1440&lt;30
				order by est.sendtime desc
				</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		   <field-define><!-- 可重复 -->
				<id>f7</id><!--总工单数-->
				<sequence>1</sequence>
        <stat-type>field_sql</stat-type>
				<stat-sql>sum(case when sysdate&gt;est.completetimelimit then 1 else 0 end)</stat-sql>
        <list-hsql>
				select est.id as mainid,est.sheetid,cast(est.sendtime as date) as sendtime,est.title,est.sheettype,cast(est.completetimelimit as date) as completetimelimit
				from v_flowcontrol est where est.sendtime&gt;=add_months(sysdate,-10) and sysdate&gt;est.completetimelimit and est.operatedeptid='@s1@'
				order by est.sendtime desc
					</list-hsql>
				<list-count-select-sql>select count(est.id)</list-count-select-sql><!--列表总数-->
		  </field-define>
		</query-define>
	</kpi-define>
	







	
</KpiConfig>